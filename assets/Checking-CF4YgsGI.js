import{_ as I,u as F,a as M,r as a,w as D,o as i,c as v,b as s,d as T,v as A,t as o,F as L,e as V,f as $,g as P,h as R,p as x,i as N,j as E,k as j,l as q,m as O,n as z}from"./index-Dh1jmiJ7.js";import{f as g}from"./currencyFormatter-BKpbXIBY.js";const S=n=>(x("data-v-7e63eaae"),n=n(),N(),n),G={class:"transfer-funds-container"},H=S(()=>s("h2",{class:"transfer-title"},"Transfer Funds",-1)),J={class:"card"},K=S(()=>s("label",{for:"searchUsername"},"Search IBANs by customer name",-1)),Q={class:"search-container"},W={key:0,class:"iban-results"},X=["onClick"],Y={class:"account-type"},Z={class:"iban"},ss={method:"POST",class:"form-container"},es={class:"form-group-row"},ts={class:"card"},as=S(()=>s("label",{for:"ibanTo"},"Recipient IBAN",-1)),os={class:"card"},ns=S(()=>s("label",{for:"transferAmount"},"Amount in â‚¬",-1)),cs={class:"card"},ls=S(()=>s("label",{for:"description"},"Description",-1)),is={class:"card button-card"},rs={key:1,class:"successMessage"},us={key:2,class:"errorMessage"},ds={__name:"TransferFunds",props:{ibanFrom:String},emits:["transactionSuccess"],setup(n,{emit:w}){const f=F(),B=M(),y=n,k=w,c=a(""),r=a([]),u=a(""),l=a(0),h=a(""),d=a(""),m=a(""),_=async()=>{if(c.value.trim()===""){alert("Please enter a valid username.");return}const[p,t]=c.value.split(" ");try{const e=await f.searchIbansByUsername(p,t);r.value=e.data}catch(e){d.value=e.message}},C=p=>{u.value=p};D(c,()=>{r.value=[]});const U=async()=>{const p="TRANSFER";try{const t={amount:l.value,ibanTo:u.value,ibanFrom:y.ibanFrom,type:p,message:h.value},e=await B.transfer(t);console.log(e),m.value="Transfer successful!",k("transactionSuccess")}catch(t){d.value="Transaction failed: "+t.message}setTimeout(()=>{m.value="",d.value="",l.value=0,u.value="",h.value="",c.value="",r.value=[],R.push({name:"customer"})},3e3)};return(p,t)=>(i(),v("div",G,[H,s("div",J,[K,s("div",Q,[T(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),id:"searchUsername",placeholder:"Enter full name"},null,512),[[A,c.value]]),s("button",{class:"btn-blue",onClick:_},"Search")])]),r.value.length>0?(i(),v("div",W,[s("h4",null,"IBANs for "+o(c.value),1),(i(!0),v(L,null,V(r.value,e=>(i(),v("div",{key:e.iban,onClick:js=>C(e.iban),class:"iban-card clickable"},[s("p",Y,o(e.accountType),1),s("p",Z,o(e.iban),1)],8,X))),128))])):$("",!0),s("form",ss,[s("div",es,[s("div",ts,[as,T(s("input",{type:"text",id:"ibanTo","onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e),required:""},null,512),[[A,u.value]])]),s("div",os,[ns,T(s("input",{type:"number",id:"transferAmount","onUpdate:modelValue":t[2]||(t[2]=e=>l.value=e),required:""},null,512),[[A,l.value]])])]),s("div",cs,[ls,T(s("textarea",{id:"description","onUpdate:modelValue":t[3]||(t[3]=e=>h.value=e),maxlength:"150",placeholder:"Enter description (max 150 characters)"},null,512),[[A,h.value]])]),s("div",is,[s("button",{type:"submit",class:"btn-green",onClick:P(U,["prevent"])},"Submit"),s("button",{type:"button",class:"btn-red",onClick:t[4]||(t[4]=e=>p.$emit("cancel"))},"Cancel")])]),m.value?(i(),v("div",rs,o(m.value),1)):$("",!0),d.value?(i(),v("div",us,o(d.value),1)):$("",!0)]))}},_s=I(ds,[["__scopeId","data-v-7e63eaae"]]),b=n=>(x("data-v-471a5f9a"),n=n(),N(),n),vs={class:"total-balance"},hs=b(()=>s("h1",null,"Checking Account",-1)),ms={class:"container text-center"},ps={class:"row"},bs={class:"row"},fs={class:"col-12"},ys={class:"card"},gs={class:"card-body"},$s=b(()=>s("p",null,"IBAN",-1)),Ss={class:"col-4"},ks={class:"card"},Ts={class:"card-body"},As=b(()=>s("p",null,"Daily Limit",-1)),ws={class:"col-4"},Bs={class:"card"},Cs={class:"card-body"},Is=b(()=>s("p",null,"Transaction Limit",-1)),Fs={class:"col-4"},Ls={class:"card"},xs={class:"card-body"},Ns=b(()=>s("p",null,"Absolute Limit",-1)),Us={class:"row justify-content-center"},Ms={class:"col-8"},Ds={class:"card"},Vs={class:"card-body"},Ps=b(()=>s("p",null,"Balance",-1)),Rs={key:0,class:"row justify-content-center"},Es={__name:"Checking",setup(n){const w=E(),f=F(),B=j(),y=a(""),k=a(0),c=a(0),r=a(0),u=a(0),l=a(!1),h=q(()=>g(f.getTotalBalance)),d=()=>{l.value=!l.value},m=async()=>{await f.getCustomerAccounts(B.id);const _=f.getCheckingAccount[0];_&&(y.value=_.iban,k.value=g(_.balance),c.value=g(w.dailyLimit),r.value=g(_.transactionLimit),u.value=g(_.absoluteLimit))};return O(async()=>{await m()}),(_,C)=>(i(),v(L,null,[s("p",vs,"Total Balance: "+o(h.value),1),hs,s("div",ms,[s("div",ps,[s("div",bs,[s("div",fs,[s("div",ys,[s("div",gs,[$s,s("h3",null,o(y.value),1)])])])]),s("div",Ss,[s("div",ks,[s("div",Ts,[As,s("h3",null,o(c.value),1)])])]),s("div",ws,[s("div",Bs,[s("div",Cs,[Is,s("h3",null,o(r.value),1)])])]),s("div",Fs,[s("div",Ls,[s("div",xs,[Ns,s("h3",null,o(u.value),1)])])])]),s("div",Us,[s("div",Ms,[s("div",Ds,[s("div",Vs,[Ps,s("h2",null,o(k.value),1)])])])]),l.value?$("",!0):(i(),v("div",Rs,[s("div",{class:"col-4"},[s("div",{class:"card"},[s("div",{class:"card-body"},[s("button",{onClick:d},"Send Payment")])])])])),l.value?(i(),z(_s,{key:1,"iban-from":y.value,totalBalance:h.value,onCancel:d,onTransactionSuccess:m},null,8,["iban-from","totalBalance"])):$("",!0)])],64))}},zs=I(Es,[["__scopeId","data-v-471a5f9a"]]);export{zs as default};
