import{_ as C,u as S,r as d,m as I,o as c,c as r,b as t,d as b,v as p,F as N,e as w,g as U,f as x,x as V,t as u,p as B,i as M}from"./index-BTuUgPTm.js";const o=m=>(B("data-v-b90872d3"),m=m(),M(),m),T=o(()=>t("h5",{class:"card-title mb-1"},"Search Account by IBAN:",-1)),q={class:"search-container mb-4"},E={key:0},F=o(()=>t("thead",null,[t("tr",null,[t("th",null,"User Name"),t("th",null,"IBAN"),t("th",null,"Account Type"),t("th",null,"Transaction Limit"),t("th",null,"Absolute Limit"),t("th",null,"User Daily Limit"),t("th",null,"Actions")])],-1)),O=["onClick","disabled"],$=["onClick"],z={key:1},H=o(()=>t("p",null,"Account not found",-1)),W=[H],j={key:2,class:"modal show d-block"},G={class:"modal-dialog"},J={class:"modal-content bg-light"},K=o(()=>t("h5",{class:"modal-title"},"Edit Account",-1)),P={class:"modal-body"},Q={class:"form-group"},R=o(()=>t("label",{for:"transactionLimit"},"Transaction Limit:",-1)),X={class:"form-group"},Y=o(()=>t("label",{for:"absoluteLimit"},"Absolute Limit:",-1)),Z={class:"form-group"},tt=o(()=>t("label",{for:"userDailyLimit"},"Daily Limit:",-1)),et=o(()=>t("button",{type:"submit",class:"btn-style p-2 mt-3"},"Confirm",-1)),st={__name:"AllAccounts",setup(m){const v=S(),a=d([]),_=d(""),n=d([]),h=d(!1),s=d({userName:"",transactionLimit:0,absoluteLimit:0,userDailyLimit:0});I(async()=>{await v.fetchAllAccountsWithUserDetails(),a.value=v.allAccounts,n.value=a.value});const y=i=>{s.value={...i},h.value=!0},f=async i=>{await v.toggleAccountStatus(i),i.active=!i.active},A=async()=>{try{const i=await v.updateAccount({...s.value,transactionLimit:s.value.transactionLimit,absoluteLimit:s.value.absoluteLimit,userDailyLimit:s.value.userDailyLimit}),l=a.value.findIndex(e=>e.id===s.value.id);l!==-1&&(a.value[l]={...a.value[l],...i,transactionLimit:s.value.transactionLimit,absoluteLimit:s.value.absoluteLimit,userDailyLimit:s.value.userDailyLimit}),L()}catch(i){console.error("Failed to update account:",i)}},L=()=>{h.value=!1,s.value={userName:"",transactionLimit:0,absoluteLimit:0,userDailyLimit:0}},D=()=>{const i=_.value.trim().toUpperCase();if(!i){n.value=a.value;return}n.value=a.value.filter(l=>l.iban.toUpperCase()===i),n.value.length===0&&console.log("Account not found")},g=()=>{n.value=a.value};return(i,l)=>(c(),r("div",null,[T,t("div",q,[b(t("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>_.value=e),id:"searchIban",class:"p-2",placeholder:"e.g.: NL05INHO3456000021",required:""},null,512),[[p,_.value]]),t("button",{class:"btn-style p-2",onClick:D},"Search"),t("button",{class:"btn-style p-2 ms-2",onClick:g},"Show all")]),n.value.length>0?(c(),r("table",E,[F,t("tbody",null,[(c(!0),r(N,null,w(n.value,e=>(c(),r("tr",{key:e.id,class:V({"inactive-account":!e.active})},[t("td",null,u(e.userName),1),t("td",null,u(e.iban),1),t("td",null,u(e.accountType),1),t("td",null,u(e.transactionLimit),1),t("td",null,u(e.absoluteLimit),1),t("td",null,u(e.userDailyLimit),1),t("td",null,[t("button",{class:"me-1 btn-style p-2",onClick:k=>y(e),disabled:!e.active},"Edit",8,O),t("button",{class:"btn-style p-2",onClick:k=>f(e)},u(e.active?"Deactivate":"Activate"),9,$)])],2))),128))])])):(c(),r("div",z,W)),h.value?(c(),r("div",j,[t("div",G,[t("div",J,[t("div",{class:"modal-header"},[K,t("button",{type:"button",class:"btn-close",onClick:L})]),t("div",P,[t("form",{onSubmit:U(A,["prevent"])},[t("div",Q,[R,b(t("input",{type:"number",class:"form-control",id:"transactionLimit","onUpdate:modelValue":l[1]||(l[1]=e=>s.value.transactionLimit=e),min:"1",required:""},null,512),[[p,s.value.transactionLimit]])]),t("div",X,[Y,b(t("input",{type:"number",class:"form-control",id:"absoluteLimit","onUpdate:modelValue":l[2]||(l[2]=e=>s.value.absoluteLimit=e),min:"1",required:""},null,512),[[p,s.value.absoluteLimit]])]),t("div",Z,[tt,b(t("input",{type:"number",class:"form-control",id:"userDailyLimit","onUpdate:modelValue":l[3]||(l[3]=e=>s.value.userDailyLimit=e),min:"1",required:""},null,512),[[p,s.value.userDailyLimit]])]),et,t("button",{type:"button",class:"btn-style p-2 mt-3 ms-2",onClick:L},"Cancel")],32)])])])])):x("",!0)]))}},it=C(st,[["__scopeId","data-v-b90872d3"]]);export{it as default};
