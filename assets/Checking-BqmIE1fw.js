import{_ as I,u as F,a as M,r as a,w as D,o as i,c as _,b as s,d as T,v as A,t as o,F as L,e as V,f as $,g as E,h as P,p as N,i as x,j as R,k as j,l as q,m as O,n as z}from"./index-BTuUgPTm.js";import{f as g}from"./currencyFormatter-BKpbXIBY.js";const S=n=>(N("data-v-a69df8c4"),n=n(),x(),n),G={class:"transfer-funds-container"},H=S(()=>s("h2",{class:"transfer-title"},"Transfer Funds",-1)),J={class:"card"},K=S(()=>s("label",{for:"searchUsername"},"Search IBANs by customer name",-1)),Q={class:"search-container"},W={key:0,class:"iban-results"},X=["onClick"],Y={class:"account-type"},Z={class:"iban"},ss={method:"POST",class:"form-container"},ts={class:"form-group-row"},es={class:"card"},as=S(()=>s("label",{for:"ibanTo"},"Recipient IBAN",-1)),os={class:"card"},ns=S(()=>s("label",{for:"transferAmount"},"Amount in â‚¬",-1)),cs={class:"card"},ls=S(()=>s("label",{for:"description"},"Description",-1)),is={class:"card button-card"},rs={key:1,class:"successMessage"},ds={key:2,class:"errorMessage"},us={__name:"TransferFunds",props:{ibanFrom:String},emits:["transactionSuccess"],setup(n,{emit:w}){const f=F(),B=M(),y=n,k=w,c=a(""),r=a([]),d=a(""),l=a(0),v=a(""),h=a(""),m=a(""),u=async()=>{if(c.value.trim()===""){alert("Please enter a valid username.");return}const[p,e]=c.value.split(" ");try{const t=await f.searchIbansByUsername(p,e);r.value=t.data}catch(t){console.error("Error fetching IBANs:",t)}},C=p=>{d.value=p};D(c,()=>{r.value=[]});const U=async()=>{const p="TRANSFER";try{const e={amount:l.value,ibanTo:d.value,ibanFrom:y.ibanFrom,type:p,message:v.value},t=await B.transfer(e);console.log(t),m.value="Transfer successful!",k("transactionSuccess")}catch(e){h.value="Transaction failed: "+e.message}setTimeout(()=>{m.value="",h.value="",l.value=0,d.value="",v.value="",c.value="",r.value=[],P.push({name:"customer"})},3e3)};return(p,e)=>(i(),_("div",G,[H,s("div",J,[K,s("div",Q,[T(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>c.value=t),id:"searchUsername",placeholder:"Enter full name"},null,512),[[A,c.value]]),s("button",{class:"btn-blue",onClick:u},"Search")])]),r.value.length>0?(i(),_("div",W,[s("h4",null,"IBANs for "+o(c.value),1),(i(!0),_(L,null,V(r.value,t=>(i(),_("div",{key:t.iban,onClick:js=>C(t.iban),class:"iban-card clickable"},[s("p",Y,o(t.accountType),1),s("p",Z,o(t.iban),1)],8,X))),128))])):$("",!0),s("form",ss,[s("div",ts,[s("div",es,[as,T(s("input",{type:"text",id:"ibanTo","onUpdate:modelValue":e[1]||(e[1]=t=>d.value=t),required:""},null,512),[[A,d.value]])]),s("div",os,[ns,T(s("input",{type:"number",id:"transferAmount","onUpdate:modelValue":e[2]||(e[2]=t=>l.value=t),required:""},null,512),[[A,l.value]])])]),s("div",cs,[ls,T(s("textarea",{id:"description","onUpdate:modelValue":e[3]||(e[3]=t=>v.value=t),maxlength:"150",placeholder:"Enter description (max 150 characters)"},null,512),[[A,v.value]])]),s("div",is,[s("button",{type:"submit",class:"btn-green",onClick:E(U,["prevent"])},"Submit"),s("button",{type:"button",class:"btn-red",onClick:e[4]||(e[4]=t=>p.$emit("cancel"))},"Cancel")])]),m.value?(i(),_("div",rs,o(m.value),1)):$("",!0),h.value?(i(),_("div",ds,o(h.value),1)):$("",!0)]))}},_s=I(us,[["__scopeId","data-v-a69df8c4"]]),b=n=>(N("data-v-471a5f9a"),n=n(),x(),n),vs={class:"total-balance"},hs=b(()=>s("h1",null,"Checking Account",-1)),ms={class:"container text-center"},ps={class:"row"},bs={class:"row"},fs={class:"col-12"},ys={class:"card"},gs={class:"card-body"},$s=b(()=>s("p",null,"IBAN",-1)),Ss={class:"col-4"},ks={class:"card"},Ts={class:"card-body"},As=b(()=>s("p",null,"Daily Limit",-1)),ws={class:"col-4"},Bs={class:"card"},Cs={class:"card-body"},Is=b(()=>s("p",null,"Transaction Limit",-1)),Fs={class:"col-4"},Ls={class:"card"},Ns={class:"card-body"},xs=b(()=>s("p",null,"Absolute Limit",-1)),Us={class:"row justify-content-center"},Ms={class:"col-8"},Ds={class:"card"},Vs={class:"card-body"},Es=b(()=>s("p",null,"Balance",-1)),Ps={key:0,class:"row justify-content-center"},Rs={__name:"Checking",setup(n){const w=R(),f=F(),B=j(),y=a(""),k=a(0),c=a(0),r=a(0),d=a(0),l=a(!1),v=q(()=>g(f.getTotalBalance)),h=()=>{l.value=!l.value},m=async()=>{await f.getCustomerAccounts(B.id);const u=f.getCheckingAccount[0];u&&(y.value=u.iban,k.value=g(u.balance),c.value=g(w.dailyLimit),r.value=g(u.transactionLimit),d.value=g(u.absoluteLimit))};return O(async()=>{await m()}),(u,C)=>(i(),_(L,null,[s("p",vs,"Total Balance: "+o(v.value),1),hs,s("div",ms,[s("div",ps,[s("div",bs,[s("div",fs,[s("div",ys,[s("div",gs,[$s,s("h3",null,o(y.value),1)])])])]),s("div",Ss,[s("div",ks,[s("div",Ts,[As,s("h3",null,o(c.value),1)])])]),s("div",ws,[s("div",Bs,[s("div",Cs,[Is,s("h3",null,o(r.value),1)])])]),s("div",Fs,[s("div",Ls,[s("div",Ns,[xs,s("h3",null,o(d.value),1)])])])]),s("div",Us,[s("div",Ms,[s("div",Ds,[s("div",Vs,[Es,s("h2",null,o(k.value),1)])])])]),l.value?$("",!0):(i(),_("div",Ps,[s("div",{class:"col-4"},[s("div",{class:"card"},[s("div",{class:"card-body"},[s("button",{onClick:h},"Send Payment")])])])])),l.value?(i(),z(_s,{key:1,"iban-from":y.value,totalBalance:v.value,onCancel:h,onTransactionSuccess:m},null,8,["iban-from","totalBalance"])):$("",!0)])],64))}},zs=I(Rs,[["__scopeId","data-v-471a5f9a"]]);export{zs as default};
