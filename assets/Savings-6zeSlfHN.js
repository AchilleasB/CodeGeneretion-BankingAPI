import{_ as F,u as M,a as D,k as V,r as n,l as G,m as W,o as v,c as p,b as e,t as i,d as I,v as k,g as N,f as b,q as H,F as R,p as K,i as L}from"./index-DPlxrR8c.js";import{f as A}from"./currencyFormatter-BKpbXIBY.js";import{l as O}from"./loading-gif-BiG_VwW3.js";const u=d=>(K("data-v-c3c3e702"),d=d(),L(),d),U=u(()=>e("h1",null,"Savings account",-1)),$={class:"container text-center"},q={class:"row"},P={class:"col-12"},j={class:"card"},z={class:"card-body"},J=u(()=>e("p",null,"IBAN",-1)),Q={class:"col-12"},X={class:"card"},Y={class:"card-body"},Z=u(()=>e("p",null,"Balance",-1)),x={class:"col-6",id:"transfer-forms"},ee={class:"card"},se={class:"card-body from-checking"},te=u(()=>e("p",null,"Deposit money (CHECKING -> SAVINGS)",-1)),ae={class:"card"},oe={class:"card-body to-checking"},ne=u(()=>e("p",null,"Withdraw money (SAVINGS -> CHECKING)",-1)),ce={key:0,class:"successMessage"},le={key:1,class:"errorMessage"},re=["src"],ie={__name:"Savings",setup(d){const l=M(),C=D(),T=V(),y=n(""),_=n(0),r=n(""),o=n(""),c=n(!1),B=G(()=>A(l.getTotalBalance)),h=n(""),m=n("");W(async()=>{try{c.value=!0;const s=T.id;await l.getCustomerAccounts(s);const t=l.getSavingsAccount[0],a=l.getCheckingAccount[0];t&&(y.value=t.iban,m.value=t.iban,_.value=A(t.balance)),a&&(h.value=a.iban)}catch(s){console.error("Error fetching accounts:",s),o.value="Failed to load accounts."}finally{c.value=!1}});const E=s=>!isNaN(s)&&s>0,S=()=>{setTimeout(()=>{r.value="",o.value=""},3e3)},w=async(s,t)=>{if(o.value="",r.value="",c.value=!0,s=parseFloat(s),!E(s)){o.value="Failed to transfer: Amount must be higher than â‚¬0.00",c.value=!1,depositAmount.value=0,withdrawAmount.value=0,S();return}const a={amount:s,ibanFrom:t?h.value:m.value,ibanTo:t?m.value:h.value,type:"TRANSFER",message:t?"Deposit money from Checking to Saving account":"Withdraw money from Saving to Checking account"};try{const g=await C.transfer(a);console.log(g),r.value="Transfer successful!";const f=l.getSavingsAccount[0];t?f.balance+=s:f.balance-=s,_.value=A(f.balance)}catch(g){o.value="Transaction failed: "+g.message}finally{c.value=!1,S()}};return(s,t)=>(v(),p(R,null,[e("p",null,"Total Balance: "+i(B.value),1),U,e("div",$,[e("div",q,[e("div",P,[e("div",j,[e("div",z,[J,e("h3",null,i(y.value),1)])])]),e("div",Q,[e("div",X,[e("div",Y,[Z,e("h2",null,i(_.value),1)])])]),e("div",x,[e("div",ee,[e("div",se,[te,I(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=a=>s.depositAmount=a),placeholder:"Enter amount"},null,512),[[k,s.depositAmount,void 0,{number:!0}]]),e("button",{onClick:t[1]||(t[1]=N(a=>w(s.depositAmount,!0),["prevent"]))},"DEPOSIT")])]),e("div",ae,[e("div",oe,[ne,I(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=a=>s.withdrawAmount=a),placeholder:"Enter amount"},null,512),[[k,s.withdrawAmount,void 0,{number:!0}]]),e("button",{onClick:t[3]||(t[3]=N(a=>w(s.withdrawAmount,!1),["prevent"]))},"WITHDRAW")])])])])]),r.value?(v(),p("div",ce,i(r.value),1)):b("",!0),o.value?(v(),p("div",le,i(o.value),1)):b("",!0),c.value?(v(),p("img",{key:2,src:H(O),alt:"Loading",class:"loading-gif"},null,8,re)):b("",!0)],64))}},pe=F(ie,[["__scopeId","data-v-c3c3e702"]]);export{pe as default};
