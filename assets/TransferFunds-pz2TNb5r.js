import{_ as R,a as D,u as L,r as a,w as M,o as r,c as i,b as e,d as f,v as m,g as q,t as h,f as I,q as O,F as S,e as E,p as H,i as P}from"./index-DPlxrR8c.js";import{l as $}from"./loading-gif-BiG_VwW3.js";const c=b=>(H("data-v-df46475e"),b=b(),P(),b),G=c(()=>e("h1",null,"Transfer Funds Menu",-1)),J={class:"container"},j={class:"row"},z={class:"col-12 col-md-6"},K={class:"card small-card"},Q={class:"card-body pt-0"},W=c(()=>e("h5",{class:"card-title"},"Form to transfer funds",-1)),X={class:"transfer-funds"},Y={method:"POST"},Z={class:"form-group"},ee=c(()=>e("label",{for:"ibanFrom"},"Sender's IBAN",-1)),se={class:"form-group"},te=c(()=>e("label",{for:"ibanTo"},"Recipient IBAN",-1)),ae={class:"form-group"},oe=c(()=>e("label",{for:"transferAmount"},"Amount (€)",-1)),ne={class:"form-group"},le=c(()=>e("label",{for:"description"},"Description",-1)),re={key:0,class:"error"},ie={key:1,class:"success"},ce=["src"],ue={class:"col-12 col-md-6"},de={class:"card small-card"},ve=c(()=>e("h5",{class:"card-title"},"Search IBANs by customer name",-1)),pe={class:"search-container"},_e={key:0,class:"iban-results"},fe={class:"iban-results-title"},me={class:"account-type"},he={class:"iban"},be={class:"iban-buttons"},ge=["onClick"],ye=["onClick"],Ie={__name:"TransferFunds",setup(b){const k=D(),B=L(),v=a(""),u=a(""),p=a(0),T=a(""),n=a(""),_=a(""),l=a(!1),A=a(!0),w=()=>{p.value<=0?A.value=!1:A.value=!0},N=a(!1),x=()=>{v.value===u.value?N.value=!0:N.value=!1},U=async()=>{if(n.value="",_.value="",l.value=!0,w(),!A.value){n.value="Failed to transfer: Amount must be higher than €0.00",l.value=!1,p.value=0,setTimeout(()=>{n.value=""},3e3);return}if(x(),N.value){n.value="Failed to transfer: IBAN of recipient and sender must be different ",l.value=!1,setTimeout(()=>{n.value="",u.value=""},3e3);return}try{const o={amount:p.value,ibanTo:u.value,ibanFrom:v.value,type:"TRANSFER",message:T.value},t=await k.transfer(o);console.log(t),_.value="Transfer successful!"}catch(o){console.log(o),n.value=o.message}l.value=!1,setTimeout(()=>{_.value="",n.value=""},4e3)},d=a(""),g=a([]),y=a(""),V=async()=>{if(d.value.trim()===""){alert("Please enter a valid username.");return}const[o,t]=d.value.split(" ");l.value=!0;try{const s=await B.searchIbansByUsername(o,t);g.value=s.data}catch(s){console.error("Error fetching IBANs:",s)}l.value=!1},F=o=>{y.value==="sender"?v.value=o:y.value==="recipient"&&(u.value=o)};return M(d,()=>{g.value=[]}),(o,t)=>(r(),i(S,null,[G,e("div",J,[e("div",j,[e("div",z,[e("div",K,[e("div",Q,[W,e("div",X,[e("form",Y,[e("div",Z,[ee,f(e("input",{type:"text",id:"ibanFrom","onUpdate:modelValue":t[0]||(t[0]=s=>v.value=s),required:"",placeholder:"e.g. : NL01INHO1234567890"},null,512),[[m,v.value]])]),e("div",se,[te,f(e("input",{type:"text",id:"ibanTo","onUpdate:modelValue":t[1]||(t[1]=s=>u.value=s),required:"",placeholder:"e.g. : NL01INHO0987654321"},null,512),[[m,u.value]])]),e("div",ae,[oe,f(e("input",{type:"number",id:"transferAmount","onUpdate:modelValue":t[2]||(t[2]=s=>p.value=s),required:"",placeholder:"e.g. : 100"},null,512),[[m,p.value]])]),e("div",ne,[le,f(e("input",{type:"text",id:"description","onUpdate:modelValue":t[3]||(t[3]=s=>T.value=s),placeholder:"e.g. : Business expenses"},null,512),[[m,T.value]])]),e("button",{type:"submit",class:"wide-button",onClick:q(U,["prevent"])},"Transfer"),n.value?(r(),i("p",re,h(n.value),1)):I("",!0),_.value?(r(),i("p",ie,h(_.value),1)):I("",!0)]),l.value?(r(),i("img",{key:0,src:O($),alt:"Loading",class:"loading-gif"},null,8,ce)):I("",!0)])])])]),e("div",ue,[e("div",de,[ve,e("div",pe,[f(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>d.value=s),id:"searchUsername",class:"no-right-padding",placeholder:"e.g. : John Doe"},null,512),[[m,d.value]]),e("button",{class:"btn-blue",onClick:V},"Search")]),g.value.length>0?(r(),i("div",_e,[e("h4",fe,"IBANs for "+h(d.value),1),(r(!0),i(S,null,E(g.value,s=>(r(),i("div",{key:s.iban,class:"iban-card"},[e("p",me,h(s.accountType),1),e("p",he,h(s.iban),1),e("div",be,[e("button",{onClick:C=>{y.value="sender",F(s.iban)}},"Sender's IBAN",8,ge),e("button",{onClick:C=>{y.value="recipient",F(s.iban)}},"Recipient's IBAN",8,ye)])]))),128))])):I("",!0)])])])])],64))}},Ne=R(Ie,[["__scopeId","data-v-df46475e"]]);export{Ne as default};
